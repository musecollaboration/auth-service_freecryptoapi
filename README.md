# Crypto API

## Описание проекта

Crypto API - это RESTful API, разработанный на Django REST Framework, предназначенный для создания основы приложения, работающего с криптовалютами. Ключевой особенностью проекта является реализация системы управления пользователями, которая обеспечивает надежную аутентификацию и авторизацию для будущих пользователей Crypto API. Проект включает в себя полный цикл управления пользовательскими аккаунтами, начиная от регистрации и заканчивая восстановлением пароля, что создает прочную базу для дальнейшего расширения функциональности, связанной с криптовалютными операциями.

## Основные функции

1. Регистрация и аутентификация пользователей
2. Подтверждение email при регистрации
3. Смена и сброс пароля
4. JWT-аутентификация
5. Ограничение количества запросов (rate limiting)
6. Асинхронные задачи с использованием Celery
7. Кэширование с использованием Redis

## Технологический стек

- Python 3.x
- Django 5.2.3
- Django REST Framework
- Celery
- Redis
- SQLite (для разработки)
- JWT (JSON Web Tokens)
- drf-spectacular (для API документации)

## Установка и настройка

1. Клонируйте репозиторий:
   git clone <URL репозитория>
   cd project_freecryptoapi

2. Создайте и активируйте виртуальное окружение:
   python -m venv venv
   source venv/bin/activate  # Для Unix-подобных систем
   venv\Scripts\activate  # Для Windows

3. Установите зависимости:
   pip install -r requirements.txt

4. Создайте файл `.env` в директории `core` и добавьте следующие переменные окружения:
   SECRET_KEY=<ваш_секретный_ключ>
   EMAIL_HOST_PASSWORD=<пароль_для_почтового_сервера>

5. Примените миграции:
   python manage.py migrate

6. Запустите сервер разработки:
   python manage.py runserver

7. Запустите Celery worker:
   celery -A core worker -l info

8. Запустите Celery beat для периодических задач:
   celery -A core beat -l info

## Структура проекта

```bash
project_freecryptoapi/
│
├── core/                  # Основной проект Django
│   ├── .env               # Файл с переменными окружения
│   ├── init.py
│   ├── asgi.py
│   ├── celery.py          # Конфигурация Celery
│   ├── settings.py        # Настройки проекта
│   ├── urls.py            # Основные URL-маршруты
│   └── wsgi.py
│
├── apps/                  # Директория с приложениями
│   ├── accounts/          # Приложение для работы с пользователями
│   │   ├── migrations/
│   │   ├── init.py
│   │   ├── admin.py
│   │   ├── apps.py
│   │   ├── managers.py    # Кастомный менеджер пользователей
│   │   ├── models.py      # Модель пользователя
│   │   ├── serializers.py # Сериализаторы
│   │   ├── signals.py     # Сигналы
│   │   ├── tasks.py       # Celery задачи
│   │   ├── urls.py        # URL-маршруты приложения
│   │   ├── utils.py       # Вспомогательные функции
│   │   └── views.py       # Представления
│   │
│   └── common/            # Общее приложение
│       ├── migrations/
│       ├── init.py
│       ├── admin.py
│       ├── apps.py
│       ├── managers.py    # Общие менеджеры
│       ├── models.py      # Общие модели
│       └── utils.py       # Вспомогательные функции
│
├── manage.py
└── requirements.txt       # Зависимости проекта
```

## API Endpoints

1. Регистрация: `POST /api/v1/auth/register/`
2. Получение токена: `POST /api/v1/auth/token/`
3. Обновление токена: `POST /api/v1/auth/token/refresh/`
4. Подтверждение email: `GET /api/v1/auth/verify-email/`
5. Смена пароля: `PATCH /api/v1/auth/change-password/`
6. Запрос на сброс пароля: `POST /api/v1/auth/reset-password/`
7. Подтверждение сброса пароля: `POST /api/v1/auth/reset-password-confirm/`

## Документация API

Документация API доступна по адресу `/api/schema/swagger-ui/` после запуска сервера разработки.

## Особенности реализации

1. **Пользовательская модель**: Используется кастомная модель пользователя с email в качестве идентификатора.

2. **JWT-аутентификация**: Используется `rest_framework_simplejwt` для работы с JWT-токенами.

3. **Подтверждение email**: При регистрации отправляется email с ссылкой для подтверждения.

4. **Асинхронные задачи**: Celery используется для отправки email и других фоновых задач.

5. **Ограничение запросов**: Используется `django-ratelimit` для ограничения количества запросов.

6. **Кэширование**: Redis используется для кэширования и в качестве брокера сообщений для Celery.

7. **API документация**: Используется `drf-spectacular` для автоматической генерации документации API.

## Безопасность

- Используется HTTPS (необходимо настроить при деплое)
- Пароли хешируются с использованием алгоритма PBKDF2
- Реализовано ограничение количества запросов для предотвращения атак
- Секретные ключи и пароли хранятся в переменных окружения

## Тестирование

Для запуска тестов используйте команду:
python manage.py test

## Деплой

При деплое на продакшен необходимо:
1. Изменить `DEBUG = False` в `settings.py`
2. Настроить HTTPS
3. Использовать более надежную БД (например, PostgreSQL)
4. Настроить CORS
5. Обновить `ALLOWED_HOSTS` и `SITE_URL` в `settings.py`


## Контакты

Александр Терехов - [@musecollaboration](https://t.me/musecollaboration)